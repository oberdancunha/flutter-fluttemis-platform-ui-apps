name: fluttemis_platform_ui_apps

ide:
  intellij:
    enabled: false

packages:
  - fluttemis_platform_ui_dependency_module
  - fluttemis_platform_ui_core
  - fluttemis_platform_ui_design_system
  - fluttemis_platform_ui_locus
  - fluttemis_platform_ui_app

command:
  bootstrap:
    runPubGetInParallel: false
  version:
    updateGitTagRefs: true
    branch: main

scripts:

  test:flutter:
    run:  melos exec -c 4 --fail-fast -- "flutter test --coverage"
    description: Run Flutter test in all projects packages.
    packageFilters:
      flutter: true
      dirExists: test

  analyze:
    exec: dart analyze .

  localization:flutter:
    exec: flutter gen-l10n
    description: Run gen-l10n to generate localizations files.
    packageFilters:
      flutter: true
      fileExists: lib/l10n/app_pt.arb

  enable:macos:build:
    exec: flutter config --enable-macos-desktop
    description: Enable macOS build
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  macos:build:
    exec: flutter build macos --release
    description: Run fluttemis build macos in release mode.
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  macos:create-dmg:
    run: | 
      /bin/sh ./scripts/create_mac_dmg.sh
    description: Create fluttemis macos dmg file
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  enable:windows:build:
    exec: flutter config --enable-windows-desktop
    description: Enable windows build
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  windows:build:
    exec: flutter build windows --release
    description: Run fluttemis build windows in release mode.
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  windows:create-msix:
    exec: flutter pub run msix:create
    description: Create windows msix file
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  enable:linux:build:
    exec: flutter config --enable-linux-desktop
    description: Enable linux build
    packageFilters:
      flutter: true
      fileExists: lib/main.dart

  linux:build:
    exec: flutter build linux --release
    description: Run fluttemis build linux in release mode.
    packageFilters:
      flutter: true
      fileExists: lib/main.dart
